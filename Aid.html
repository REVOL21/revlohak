<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AidTogether ‚Äî —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏</title>
    <style>
        :root {
            --bg: #0f1724;
            --card: #0b1220;
            --muted: #9aa4b3;
            --accent: #7c5cff;
            --accent2: #00c6ff;
            --success: #00d26a;
            --warning: #ffb224;
            --education: #8b5cf6;
            --premium: #ffd700;
            --premium-glow: rgba(255, 215, 0, 0.3);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: linear-gradient(180deg, var(--bg), #071021 150%);
            color: #e6eef8;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #021024;
        }
        
        .logo-text h1 {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .logo-text p {
            font-size: 0.85rem;
            color: var(--muted);
            margin: 0;
        }
        
        nav {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        nav a, nav button {
            background: transparent;
            border: none;
            color: var(--muted);
            cursor: pointer;
            text-decoration: none;
            padding: 6px 10px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        nav a:hover, nav button:hover {
            color: var(--accent2);
            background: rgba(255, 255, 255, 0.02);
        }
        
        #userInfo {
            font-size: 0.9rem;
            color: var(--muted);
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--muted);
        }
        
        main {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            align-items: start;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.02);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.03);
            margin-bottom: 20px;
        }
        
        .hero {
            padding: 30px;
            text-align: left;
        }
        
        .hero h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .small {
            font-size: 0.9rem;
            color: var(--muted);
        }
        
        .sections-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .section-card {
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.02);
            cursor: pointer;
            transition: transform 0.2s ease, background 0.2s ease;
        }
        
        .section-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.05);
        }
        
        .section-card h4 {
            margin-bottom: 5px;
        }
        
        button {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--muted);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        
        button.primary {
            background: linear-gradient(90deg, var(--accent), var(--accent2));
            color: #021024;
            font-weight: 600;
            border: none;
        }
        
        button.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(124, 92, 255, 0.3);
        }
        
        button.ghost {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--muted);
        }
        
        button.success {
            background: var(--success);
            color: #021024;
            border: none;
            font-weight: 600;
        }
        
        button.education {
            background: var(--education);
            color: #021024;
            border: none;
            font-weight: 600;
        }
        
        button.premium {
            background: linear-gradient(90deg, var(--premium), #ffaa00);
            color: #021024;
            border: none;
            font-weight: 600;
        }
        
        .chat-window {
            display: flex;
            flex-direction: column;
            height: 400px;
        }
        
        .chat-messages {
            flex: 1;
            overflow: auto;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .msg {
            display: flex;
            gap: 8px;
            align-items: flex-start;
            max-width: 95%;
        }
        
        .msg.me {
            flex-direction: row-reverse;
        }
        
        .msg .bubble {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 12px;
            border-radius: 10px;
            max-width: 80%;
        }
        
        .msg.me .bubble {
            background: linear-gradient(90deg, var(--accent), var(--accent2));
            color: #021024;
        }
        
        .msg.sale .bubble {
            background: rgba(255, 178, 36, 0.1);
            border: 1px solid var(--warning);
        }
        
        .msg.purchase .bubble {
            background: rgba(0, 210, 106, 0.1);
            border: 1px solid var(--success);
        }
        
        input, textarea, select {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: inherit;
            font-family: inherit;
            width: 100%;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* –õ–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π */
        .feed-section {
            margin-top: 30px;
        }
        
        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .feed-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .feed-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .horizontal-feed {
            position: relative;
            overflow: hidden;
        }
        
        .feed-container {
            display: flex;
            gap: 16px;
            transition: transform 0.5s ease-in-out;
            padding: 8px 4px;
            margin: 0 -4px;
        }
        
        .feed-card {
            flex: 0 0 300px;
            background: rgba(255, 255, 255, 0.02);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.03);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.7;
            transform: scale(0.95);
        }
        
        .feed-card.premium {
            border: 2px solid var(--premium);
            box-shadow: 0 0 15px var(--premium-glow);
            position: relative;
        }
        
        .feed-card.premium::before {
            content: '‚≠ê –ü–†–ï–ú–ò–£–ú';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--premium);
            color: #021024;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            z-index: 1;
        }
        
        .feed-card.active {
            opacity: 1;
            transform: scale(1);
        }
        
        .feed-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--accent2));
        }
        
        .feed-card.premium::after {
            background: linear-gradient(90deg, var(--premium), #ffaa00);
        }
        
        .feed-card:hover {
            transform: translateY(-4px) scale(1);
            background: rgba(255, 255, 255, 0.03);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .feed-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }
        
        .feed-card-title {
            font-weight: 600;
            font-size: 1.1rem;
            line-height: 1.3;
            flex: 1;
        }
        
        .feed-card-price {
            background: var(--success);
            color: #021024;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1rem;
            white-space: nowrap;
        }
        
        .feed-card-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-size: 0.8rem;
        }
        
        .feed-card-category {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.05);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .feed-card-author {
            font-weight: 500;
            color: var(--accent2);
        }
        
        .feed-card-actions {
            display: flex;
            gap: 8px;
        }
        
        .feed-card-buy {
            background: var(--success);
            color: #021024;
            border: 0;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            flex: 1;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .feed-card-buy:hover {
            transform: scale(1.05);
        }
        
        .feed-card-contact {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .feed-card-contact:hover {
            background: var(--accent);
            color: #021024;
        }
        
        .feed-nav-button {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--muted);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.2s ease;
        }
        
        .feed-nav-button:hover {
            background: var(--accent);
            color: #021024;
        }
        
        .feed-nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .feed-refresh {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        
        .feed-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--muted);
        }
        
        .feed-empty-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .feed-indicators {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }
        
        .feed-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .feed-indicator.active {
            background: var(--accent);
            transform: scale(1.2);
        }
        
        /* –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å */
        .marketplace-filters {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 12px;
            margin-bottom: 16px;
            align-items: end;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .filter-label {
            font-size: 0.8rem;
            color: var(--muted);
        }
        
        .filter-actions {
            display: flex;
            gap: 8px;
        }
        
        .marketplace-item {
            background: rgba(255, 255, 255, 0.02);
            padding: 16px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.03);
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .marketplace-item.premium {
            border: 2px solid var(--premium);
            box-shadow: 0 0 15px var(--premium-glow);
            position: relative;
        }
        
        .marketplace-item.premium::before {
            content: '‚≠ê –ü–†–ï–ú–ò–£–ú';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--premium);
            color: #021024;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            z-index: 1;
        }
        
        .marketplace-item:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.03);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .marketplace-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 8px;
        }
        
        .marketplace-title {
            font-weight: 600;
            flex: 1;
            font-size: 1.1rem;
        }
        
        .marketplace-price {
            background: var(--success);
            color: #021024;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1rem;
        }
        
        .marketplace-description {
            color: var(--muted);
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .marketplace-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--muted);
        }
        
        .marketplace-type {
            background: var(--warning);
            color: #021024;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .marketplace-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .buy-button {
            background: var(--success);
            color: #021024;
            border: 0;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            flex: 1;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .buy-button:hover {
            transform: scale(1.05);
        }
        
        .contact-button {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .contact-button:hover {
            background: var(--accent);
            color: #021024;
        }
        
        /* –§–æ—Ä–º—ã */
        .sale-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .form-label {
            font-size: 0.9rem;
            color: var(--muted);
        }
        
        .price-input {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .price-input input {
            flex: 1;
        }
        
        .currency {
            color: var(--muted);
            white-space: nowrap;
        }
        
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal .inner {
            background: var(--card);
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .modal-close {
            background: transparent;
            border: none;
            color: var(--muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .filter-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .filter-actions button {
            flex: 1;
        }
        
        .ad-detail {
            padding: 20px;
        }
        
        .ad-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }
        
        .ad-detail-title {
            font-size: 1.4rem;
            font-weight: 600;
            flex: 1;
        }
        
        .ad-detail-price {
            background: var(--success);
            color: #021024;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.2rem;
            white-space: nowrap;
        }
        
        .ad-detail-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: var(--muted);
        }
        
        .ad-detail-description {
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .ad-detail-actions {
            display: flex;
            gap: 10px;
        }
        
        .ad-detail-actions button {
            flex: 1;
        }
        
        /* –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è */
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--muted);
            font-size: 1.5rem;
        }
        
        .profile-avatar.premium {
            border: 2px solid var(--premium);
            box-shadow: 0 0 10px var(--premium-glow);
        }
        
        .profile-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }
        
        .profile-skill {
            background: var(--accent);
            color: #021024;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .role-badge {
            background: linear-gradient(45deg, var(--accent), var(--accent2));
            color: #021024;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 5px;
        }
        
        .buyer-badge {
            background: var(--success);
            color: #021024;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 5px;
        }
        
        .premium-badge {
            background: linear-gradient(45deg, var(--premium), #ffaa00);
            color: #021024;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 5px;
        }
        
        /* –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è */
        .conversations-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        
        .conversation-item {
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .conversation-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .conversation-item.active {
            background: rgba(124, 92, 255, 0.1);
        }
        
        .conversation-avatar {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--muted);
        }
        
        .conversation-avatar.premium {
            border: 1px solid var(--premium);
        }
        
        .conversation-info {
            flex: 1;
        }
        
        .conversation-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .conversation-preview {
            font-size: 0.8rem;
            color: var(--muted);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }
        
        .conversation-time {
            font-size: 0.7rem;
            color: var(--muted);
        }
        
        .new-conversation {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .new-conversation input {
            flex: 1;
        }
        
        /* –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è */
        .response-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
        }
        
        .response-item {
            background: rgba(255, 255, 255, 0.02);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.03);
        }
        
        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .response-author {
            font-weight: 600;
            color: var(--accent2);
        }
        
        .response-date {
            font-size: 0.8rem;
            color: var(--muted);
        }
        
        .response-message {
            color: var(--muted);
            line-height: 1.4;
        }
        
        /* –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ */
        .premium-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 170, 0, 0.1));
            border: 1px solid var(--premium);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .premium-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--premium), #ffaa00);
        }
        
        .premium-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .premium-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--premium);
        }
        
        .premium-price {
            background: var(--premium);
            color: #021024;
            padding: 6px 12px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .premium-features {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .premium-features li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .premium-features li::before {
            content: '‚úì';
            color: var(--premium);
            font-weight: bold;
        }
        
        .premium-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            margin-bottom: 15px;
        }
        
        .premium-status.active {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid var(--premium);
        }
        
        .premium-status-icon {
            color: var(--premium);
            font-size: 1.2rem;
        }
        
        @media (max-width: 900px) {
            main {
                grid-template-columns: 1fr;
            }
            
            .marketplace-filters {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .feed-card {
                flex: 0 0 280px;
            }
        }
        
        @media (max-width: 600px) {
            header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            nav {
                flex-wrap: wrap;
            }
            
            .sections-grid {
                grid-template-columns: 1fr;
            }
            
            .form-navigation {
                flex-direction: column;
            }
            
            .marketplace-actions {
                flex-direction: column;
            }
            
            .feed-header {
                flex-direction: column;
                gap: 12px;
                align-items: start;
            }
            
            .feed-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .feed-card {
                flex: 0 0 260px;
            }
            
            .ad-detail-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">AT</div>
                <div class="logo-text">
                    <h1>AidTogether</h1>
                    <p>–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏</p>
                </div>
            </div>
            <nav>
                <a href="#" onclick="showHome()">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#" onclick="openSection('artists')">–•—É–¥–æ–∂–Ω–∏–∫–∏</a>
                <a href="#" onclick="openSection('musicians')">–ú—É–∑—ã–∫–∞–Ω—Ç—ã</a>
                <a href="#" onclick="openSection('writers')">–ü–∏—Å–∞—Ç–µ–ª–∏</a>
                <a href="#" onclick="openSection('directors')">–†–µ–∂–∏—Å—Å—ë—Ä—ã</a>
                <a href="#" onclick="openMarketplace()">üí∞ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
                <a href="#" onclick="openMessages()">üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</a>
                <span id="userInfo"></span>
                <button id="btnLogin" onclick="openAuth('login')">–í–æ–π—Ç–∏</button>
                <button id="btnRegister" onclick="openAuth('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </nav>
        </header>
        
        <main>
            <section id="homePage">
                <div class="card hero" id="heroSection">
                    <h2>–°–æ–∑–¥–∞–≤–∞–π –≤–º–µ—Å—Ç–µ!</h2>
                    <p class="small">–ù–∞–π–¥–∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ ‚Äî —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤, –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤, –ø–∏—Å–∞—Ç–µ–ª–µ–π –∏–ª–∏ —Ä–µ–∂–∏—Å—Å—ë—Ä–æ–≤. –ü–æ–∫—É–ø–∞–π –∏ –ø—Ä–æ–¥–∞–≤–∞–π —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã.</p>
                    <div style="display:flex;gap:8px;margin-top:12px">
                        <button class="primary" onclick="openAuth('register')">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                        <button class="ghost" onclick="openAuth('login')">–í–æ–π—Ç–∏</button>
                    </div>
                </div>
                
                <!-- –ü—Ä–µ–º–∏—É–º –∫–∞—Ä—Ç–æ—á–∫–∞ -->
                <div class="premium-card">
                    <div class="premium-header">
                        <div class="premium-title">‚≠ê –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞</div>
                        <div class="premium-price">499‚ÇΩ/–º–µ—Å</div>
                    </div>
                    <ul class="premium-features">
                        <li>–í—ã–¥–µ–ª–µ–Ω–∏–µ –≤–∞—à–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∑–æ–ª–æ—Ç–æ–π —Ä–∞–º–∫–æ–π</li>
                        <li>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ –ª–µ–Ω—Ç–µ –∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ</li>
                        <li>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∑–Ω–∞—á–æ–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ —á–∞—Ç–∞—Ö</li>
                        <li>–ü–æ–≤—ã—à–µ–Ω–Ω–æ–µ –¥–æ–≤–µ—Ä–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                    </ul>
                    <div id="premiumStatus"></div>
                    <button class="premium" onclick="openPremiumModal()" id="premiumButton">–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–º–∏—É–º</button>
                </div>
                
                <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
                <div class="feed-section">
                    <div class="feed-header">
                        <div class="feed-title">üéØ –°–≤–µ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</div>
                        <div class="feed-controls">
                            <button class="feed-nav-button" onclick="scrollFeed(-1)" id="feedPrev">‚Äπ</button>
                            <button class="feed-refresh" onclick="loadFeed()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                            <button class="feed-nav-button" onclick="scrollFeed(1)" id="feedNext">‚Ä∫</button>
                        </div>
                    </div>
                    
                    <div class="horizontal-feed">
                        <div class="feed-container" id="feedContainer">
                            <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                    
                    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ -->
                    <div class="feed-indicators" id="feedIndicators">
                        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <div class="card">
                    <h3>–†–∞–∑–¥–µ–ª—ã</h3>
                    <div class="sections-grid">
                        <div class="section-card" onclick="openSection('artists')"><h4>üé® –•—É–¥–æ–∂–Ω–∏–∫–∏</h4><div class="small">–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –¥–∏–∑–∞–π–Ω</div></div>
                        <div class="section-card" onclick="openSection('musicians')"><h4>üéµ –ú—É–∑—ã–∫–∞–Ω—Ç—ã</h4><div class="small">–ú—É–∑—ã–∫–∞ –∏ –∑–≤—É–∫–∏</div></div>
                        <div class="section-card" onclick="openSection('writers')"><h4>‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª–∏</h4><div class="small">–ò—Å—Ç–æ—Ä–∏–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏</div></div>
                        <div class="section-card" onclick="openSection('directors')"><h4>üé¨ –†–µ–∂–∏—Å—Å—ë—Ä—ã</h4><div class="small">–§–∏–ª—å–º—ã –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏</div></div>
                        <div class="section-card" onclick="openMarketplace()"><h4>üí∞ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h4><div class="small">–ü—Ä–æ–¥–∞–∂–∏ –∏ –ø–æ–∫—É–ø–∫–∏</div></div>
                        <div class="section-card" onclick="openMessages()"><h4>üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</h4><div class="small">–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div></div>
                    </div>
                </div>
            </section>

            <aside id="rightPanel">
                <div class="card hidden" id="chatCard">
                    <h3 id="chatTitle">–ß–∞—Ç</h3>
                    <div class="chat-window">
                        <div class="chat-messages" id="chatMessages"></div>
                        <div style="display:flex;gap:8px;margin-top:8px">
                            <input id="chatInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." />
                            <button onclick="handleSend()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>
                </div>

                <div class="card hidden" id="messagesCard">
                    <h3>üí¨ –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
                    <div class="new-conversation">
                        <input id="newConversationInput" placeholder="–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è..." />
                        <button onclick="startNewConversation()">–ù–∞—á–∞—Ç—å</button>
                    </div>
                    <div class="conversations-list" id="conversationsList">
                        <!-- –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                    <div class="chat-window">
                        <div class="chat-messages" id="privateChatMessages"></div>
                        <div style="display:flex;gap:8px;margin-top:8px">
                            <input id="privateChatInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." />
                            <button onclick="handlePrivateSend()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>
                </div>

                <div class="card hidden" id="marketplaceCard">
                    <h3>üí∞ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h3>
                    
                    <!-- –§–∏–ª—å—Ç—Ä—ã -->
                    <div class="marketplace-filters">
                        <div class="filter-group">
                            <div class="filter-label">üîç –ü–æ–∏—Å–∫</div>
                            <input type="text" id="searchFilter" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ..." oninput="applyFilters()">
                        </div>
                        <div class="filter-group">
                            <div class="filter-label">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è</div>
                            <select id="categoryFilter" onchange="applyFilters()">
                                <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                                <option value="artists">üé® –•—É–¥–æ–∂–Ω–∏–∫–∏</option>
                                <option value="musicians">üéµ –ú—É–∑—ã–∫–∞–Ω—Ç—ã</option>
                                <option value="writers">‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª–∏</option>
                                <option value="directors">üé¨ –†–µ–∂–∏—Å—Å—ë—Ä—ã</option>
                            </select>
                        </div>
                        <div class="filter-actions">
                            <button class="ghost" onclick="clearFilters()">‚ùå –°–±—Ä–æ—Å–∏—Ç—å</button>
                            <button class="primary" onclick="openFilterModal()">üîç –§–∏–ª—å—Ç—Ä—ã</button>
                        </div>
                    </div>

                    <div style="display:flex;gap:8px;margin-bottom:16px">
                        <button class="primary" onclick="showSaleForm()" style="flex:1">‚ûï –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
                        <button class="ghost" onclick="loadMarketplace()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div id="marketplaceList"></div>
                </div>

                <div class="card hidden" id="saleFormCard">
                    <h3>üì¶ –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                    <div class="sale-form">
                        <div class="form-group">
                            <label class="form-label">–¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è</label>
                            <select id="saleType">
                                <option value="sell">üíé –ü—Ä–æ–¥–∞–∂–∞ —É—Å–ª—É–≥–∏</option>
                                <option value="buy">üõí –ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</option>
                                <option value="project">üöÄ –¢–µ–Ω–¥–µ—Ä –Ω–∞ –ø—Ä–æ–µ–∫—Ç</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input id="saleTitle" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–∞..." />
                        </div>
                        <div class="form-group">
                            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <textarea id="saleDescription" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —É—Å–ª—É–≥–∏..." rows="4"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ë—é–¥–∂–µ—Ç/–¶–µ–Ω–∞</label>
                            <div class="price-input">
                                <input id="salePrice" type="number" placeholder="0" />
                                <span class="currency">‚ÇΩ</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select id="saleCategory">
                                <option value="artists">üé® –•—É–¥–æ–∂–Ω–∏–∫–∏</option>
                                <option value="musicians">üéµ –ú—É–∑—ã–∫–∞–Ω—Ç—ã</option>
                                <option value="writers">‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª–∏</option>
                                <option value="directors">üé¨ –†–µ–∂–∏—Å—Å—ë—Ä—ã</option>
                            </select>
                        </div>
                        <div class="form-navigation">
                            <button class="ghost" onclick="showMarketplace()">–û—Ç–º–µ–Ω–∞</button>
                            <button class="primary" onclick="createSale()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                        </div>
                    </div>
                </div>

                <div class="card hidden" id="authContainer"></div>
            </aside>
        </main>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
    <div class="modal" id="filterModal">
        <div class="inner">
            <div class="modal-header">
                <h3 class="modal-title">üîç –§–∏–ª—å—Ç—Ä—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h3>
                <button class="modal-close" id="closeFilterModal">√ó</button>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select id="modalCategoryFilter">
                    <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    <option value="artists">üé® –•—É–¥–æ–∂–Ω–∏–∫–∏</option>
                    <option value="musicians">üéµ –ú—É–∑—ã–∫–∞–Ω—Ç—ã</option>
                    <option value="writers">‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª–∏</option>
                    <option value="directors">üé¨ –†–µ–∂–∏—Å—Å—ë—Ä—ã</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">–¢–∏–ø –æ–±—ä—è–≤–ª–µ–Ω–∏—è</label>
                <select id="modalTypeFilter">
                    <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
                    <option value="sell">üíé –ü—Ä–æ–¥–∞–∂–∞</option>
                    <option value="buy">üõí –ü–æ–∏—Å–∫</option>
                    <option value="project">üöÄ –¢–µ–Ω–¥–µ—Ä</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">–¶–µ–Ω–∞</label>
                <div style="display: flex; gap: 10px;">
                    <input type="number" id="modalPriceMin" placeholder="–û—Ç" style="flex: 1;">
                    <input type="number" id="modalPriceMax" placeholder="–î–æ" style="flex: 1;">
                </div>
            </div>
            
            <div class="filter-actions">
                <button id="modalResetFilters">–°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="primary" id="modalApplyFilters">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
    <div class="modal" id="adDetailModal">
        <div class="inner">
            <div class="modal-header">
                <h3 class="modal-title">–î–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h3>
                <button class="modal-close" id="closeAdDetailModal">√ó</button>
            </div>
            
            <div class="ad-detail">
                <div class="ad-detail-header">
                    <div class="ad-detail-title" id="detailTitle">–•–∞–∫—Ç–∞–∫–æ–Ω —Ç–µ—Å—Ç</div>
                    <div class="ad-detail-price" id="detailPrice">999P</div>
                </div>
                
                <div class="ad-detail-meta">
                    <div id="detailCategory">üé¨ –†–µ–∂–∏—Å—Å—ë—Ä—ã</div>
                    <div id="detailDate">12 –º–∞—è 2023, 14:30</div>
                </div>
                
                <div class="ad-detail-description" id="detailDescription">
                    –ò—â—É –¥–∏–∑–∞–π–Ω–µ—Ä–∞ –∏ —Å—É–∞–Ω–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –º–µ–¥–∏–π–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ù—É–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ –º–µ–¥–∏–∞-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤.
                </div>
                
                <div class="ad-detail-meta">
                    <div>–ê–≤—Ç–æ—Ä: <span id="detailAuthor">–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤</span></div>
                    <div id="detailType">–ü–æ–∏—Å–∫</div>
                </div>
                
                <!-- –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ -->
                <div id="adResponses" style="margin-top: 20px;">
                    <h4>üì® –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h4>
                    <div id="responsesList"></div>
                    
                    <!-- –§–æ—Ä–º–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∫–ª–∏–∫–∞ -->
                    <div class="response-form" id="responseForm">
                        <textarea id="responseMessage" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –æ—Ç–∫–ª–∏–∫ –Ω–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ..." rows="3"></textarea>
                        <button class="primary" onclick="submitResponse()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫</button>
                    </div>
                </div>
                
                <div class="ad-detail-actions">
                    <button class="feed-card-contact" onclick="startPrivateChatFromAd()">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ –õ–°</button>
                    <button class="feed-card-buy" onclick="showResponseForm()">üì® –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏ -->
    <div class="modal" id="premiumModal">
        <div class="inner">
            <div class="modal-header">
                <h3 class="modal-title">‚≠ê –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞</h3>
                <button class="modal-close" id="closePremiumModal">√ó</button>
            </div>
            
            <div class="premium-card" style="margin: 0;">
                <div class="premium-header">
                    <div class="premium-title">–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞</div>
                    <div class="premium-price">499‚ÇΩ/–º–µ—Å</div>
                </div>
                <ul class="premium-features">
                    <li>–í—ã–¥–µ–ª–µ–Ω–∏–µ –≤–∞—à–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∑–æ–ª–æ—Ç–æ–π —Ä–∞–º–∫–æ–π</li>
                    <li>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ –ª–µ–Ω—Ç–µ –∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ</li>
                    <li>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∑–Ω–∞—á–æ–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ —á–∞—Ç–∞—Ö</li>
                    <li>–ü–æ–≤—ã—à–µ–Ω–Ω–æ–µ –¥–æ–≤–µ—Ä–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                    <li>–î–æ 10 –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</li>
                    <li>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–∏—Å–∫–∞</li>
                </ul>
                
                <div class="form-group">
                    <label class="form-label">–°—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏</label>
                    <select id="premiumDuration">
                        <option value="1">1 –º–µ—Å—è—Ü - 499‚ÇΩ</option>
                        <option value="3">3 –º–µ—Å—è—Ü–∞ - 1299‚ÇΩ (—ç–∫–æ–Ω–æ–º–∏—è 10%)</option>
                        <option value="12">12 –º–µ—Å—è—Ü–µ–≤ - 4499‚ÇΩ (—ç–∫–æ–Ω–æ–º–∏—è 25%)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
                    <select id="paymentMethod">
                        <option value="card">–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞</option>
                        <option value="yoomoney">–ÆMoney</option>
                        <option value="qiwi">QIWI</option>
                    </select>
                </div>
                
                <div class="form-navigation">
                    <button class="ghost" onclick="hidePremiumModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="premium" onclick="purchasePremium()">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div id="aboutModal" class="modal">
        <div class="inner">
            <h3>–û –ø—Ä–æ–µ–∫—Ç–µ AidTogether</h3>
            <p>AidTogether ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –ª—é–¥–µ–π, –≥–¥–µ –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å—Å—è –≤ –∫–æ–º–∞–Ω–¥—ã, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∏ –ø–æ–∫—É–ø–∞—Ç—å/–ø—Ä–æ–¥–∞–≤–∞—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã.</p>
            <p><strong>–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p>
            <ol>
                <li>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É</li>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º</li>
                <li>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ç–µ–Ω–¥–µ—Ä—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ</li>
                <li>–ù–∞—Ö–æ–¥–∏—Ç–µ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –¥–ª—è –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–π</li>
            </ol>
            <button class="primary" onclick="hideAbout()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="inner">
            <div id="profileContent"></div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
        let appData = {
            users: [
                {
                    name: "–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤",
                    email: "alex@example.com",
                    password: "123456",
                    profile: {
                        role: 'director',
                        skills: ['–†–µ–∂–∏—Å—Å—É—Ä–∞', '–ú–æ–Ω—Ç–∞–∂'],
                        bio: '–†–µ–∂–∏—Å—Å–µ—Ä —Å 5-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã –≤ –º–µ–¥–∏–∞-–∏–Ω–¥—É—Å—Ç—Ä–∏–∏',
                        experience: 'advanced',
                        joinDate: new Date().toISOString(),
                        premium: {
                            active: true,
                            expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString() // +30 –¥–Ω–µ–π
                        }
                    }
                },
                {
                    name: "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞",
                    email: "maria@example.com",
                    password: "123456",
                    profile: {
                        role: 'musician',
                        skills: ['–§–æ—Ä—Ç–µ–ø–∏–∞–Ω–æ', '–í–æ–∫–∞–ª'],
                        bio: '–ú—É–∑—ã–∫–∞–Ω—Ç –∏ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä',
                        experience: 'intermediate',
                        joinDate: new Date().toISOString(),
                        premium: {
                            active: false,
                            expires: null
                        }
                    }
                }
            ],
            currentUser: null,
            chats: {
                'chat-general': [],
                'chat-artists': [],
                'chat-musicians': [],
                'chat-writers': [],
                'chat-directors': [],
                'chat-marketplace': []
            },
            // –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
            privateMessages: {},
            marketplace: [
                {
                    id: 1,
                    title: "–•–∞–∫—Ç–∞–∫–æ–Ω —Ç–µ—Å—Ç",
                    price: 999,
                    category: "directors",
                    type: "buy",
                    description: "–ò—â—É –¥–∏–∑–∞–π–Ω–µ—Ä–∞ –∏ —Å—É–∞–Ω–¥ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞ –¥–ª—è –º–µ–¥–∏–π–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ù—É–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ü–∏—é –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç–∞.",
                    author: "–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤",
                    authorEmail: "alex@example.com",
                    createdAt: "2023-05-12T14:30:00",
                    premium: true
                },
                {
                    id: 2,
                    title: "123",
                    price: 123,
                    category: "musicians",
                    type: "sell",
                    description: "123",
                    author: "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞",
                    authorEmail: "maria@example.com",
                    createdAt: "2023-05-11T10:15:00",
                    premium: false
                },
                {
                    id: 3,
                    title: "–î–∏–∑–∞–π–Ω –ª–æ–≥–æ—Ç–∏–ø–∞",
                    price: 1500,
                    category: "artists",
                    type: "sell",
                    description: "–°–æ–∑–¥–∞–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–µ–Ω–¥–∞. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä.",
                    author: "–î–º–∏—Ç—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤",
                    authorEmail: "dmitry@example.com",
                    createdAt: "2023-05-10T16:45:00",
                    premium: true
                },
                {
                    id: 4,
                    title: "–°–∞—É–Ω–¥—Ç—Ä–µ–∫ –¥–ª—è –≤–∏–¥–µ–æ",
                    price: 800,
                    category: "musicians",
                    type: "sell",
                    description: "–ù–∞–ø–∏—à—É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –º—É–∑—ã–∫—É –¥–ª—è –≤–∞—à–µ–≥–æ –≤–∏–¥–µ–æ-–ø—Ä–æ–µ–∫—Ç–∞. –õ—é–±–æ–π –∂–∞–Ω—Ä, –±—ã—Å—Ç—Ä—ã–µ —Å—Ä–æ–∫–∏.",
                    author: "–û–ª—å–≥–∞ –ö–æ–∑–ª–æ–≤–∞",
                    authorEmail: "olga@example.com",
                    createdAt: "2023-05-09T12:20:00",
                    premium: false
                }
            ],
            // –û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
            responses: {},
            purchases: []
        };

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∫–µ—Ç—ã
        const roles = [
            {id: 'artist', name: 'üé® –•—É–¥–æ–∂–Ω–∏–∫', skills: ['–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è', '–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω', 'Digital Art', 'UI/UX –¥–∏–∑–∞–π–Ω']},
            {id: 'musician', name: 'üéµ –ú—É–∑—ã–∫–∞–Ω—Ç', skills: ['–ì–∏—Ç–∞—Ä–∞', '–§–æ—Ä—Ç–µ–ø–∏–∞–Ω–æ', '–í–æ–∫–∞–ª', '–°–≤–µ–¥–µ–Ω–∏–µ']},
            {id: 'writer', name: '‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª—å', skills: ['–ü–æ—ç–∑–∏—è', '–ü—Ä–æ–∑–∞', '–°—Ü–µ–Ω–∞—Ä–∏–∏', '–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥']},
            {id: 'director', name: 'üé¨ –†–µ–∂–∏—Å—Å—ë—Ä', skills: ['–†–µ–∂–∏—Å—Å—É—Ä–∞', '–ú–æ–Ω—Ç–∞–∂', '–°—Ü–µ–Ω–∞—Ä–∏—Å—Ç–∏–∫–∞', '–û–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞']},
            {id: 'buyer', name: 'üí∞ –ü–æ–∫—É–ø–∞—Ç–µ–ª—å', skills: ['–ó–∞–∫–∞–∑ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π', '–ü–æ–∫—É–ø–∫–∞ –º—É–∑—ã–∫–∏', '–ó–∞–∫–∞–∑ —Ç–µ–∫—Å—Ç–æ–≤', '–§–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤']},
            {id: 'other', name: 'üåü –î—Ä—É–≥–æ–µ', skills: ['–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è', '–í–∏–¥–µ–æ–º–æ–Ω—Ç–∞–∂', '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥', '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è']}
        ];

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const userInfoEl = document.getElementById('userInfo');
        const btnLogin = document.getElementById('btnLogin');
        const btnRegister = document.getElementById('btnRegister');
        const authContainer = document.getElementById('authContainer');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const homePage = document.getElementById('homePage');
        const chatCard = document.getElementById('chatCard');
        const messagesCard = document.getElementById('messagesCard');
        const marketplaceCard = document.getElementById('marketplaceCard');
        const saleFormCard = document.getElementById('saleFormCard');
        const heroSection = document.getElementById('heroSection');
        const marketplaceList = document.getElementById('marketplaceList');
        const feedContainer = document.getElementById('feedContainer');
        const feedPrev = document.getElementById('feedPrev');
        const feedNext = document.getElementById('feedNext');
        const feedIndicators = document.getElementById('feedIndicators');
        const filterModal = document.getElementById('filterModal');
        const closeFilterModal = document.getElementById('closeFilterModal');
        const modalApplyFilters = document.getElementById('modalApplyFilters');
        const modalResetFilters = document.getElementById('modalResetFilters');
        const adDetailModal = document.getElementById('adDetailModal');
        const closeAdDetailModal = document.getElementById('closeAdDetailModal');
        const conversationsList = document.getElementById('conversationsList');
        const privateChatMessages = document.getElementById('privateChatMessages');
        const privateChatInput = document.getElementById('privateChatInput');
        const newConversationInput = document.getElementById('newConversationInput');
        const responsesList = document.getElementById('responsesList');
        const responseForm = document.getElementById('responseForm');
        const responseMessage = document.getElementById('responseMessage');
        const premiumModal = document.getElementById('premiumModal');
        const closePremiumModal = document.getElementById('closePremiumModal');
        const premiumStatus = document.getElementById('premiumStatus');
        const premiumButton = document.getElementById('premiumButton');

        // –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤
        const searchFilter = document.getElementById('searchFilter');
        const categoryFilter = document.getElementById('categoryFilter');
        const modalCategoryFilter = document.getElementById('modalCategoryFilter');
        const modalTypeFilter = document.getElementById('modalTypeFilter');
        const modalPriceMin = document.getElementById('modalPriceMin');
        const modalPriceMax = document.getElementById('modalPriceMax');

        let currentChat = 'chat-general';
        let currentStep = 0;
        let formData = {
            role: '',
            skills: [],
            bio: '',
            experience: 'beginner'
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ª–µ–Ω—Ç—ã
        let currentAdIndex = 0;
        let filteredAds = [...appData.marketplace];
        let cardsPerView = 3;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        let currentConversation = null;

        // –¢–µ–∫—É—â–µ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–ª—è –æ—Ç–∫–ª–∏–∫–∞
        let currentAdForResponse = null;

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
        function saveData() {
            try {
                localStorage.setItem('aidtogether_data', JSON.stringify(appData));
            } catch (e) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ localStorage');
            }
        }

        function escapeHtml(s) {
            return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
        }

        function initials(name) {
            return name.split(' ').map(p => p[0]).join('').slice(0,2).toUpperCase();
        }

        function updateHeader() {
            if (appData.currentUser) {
                const isPremium = appData.currentUser.profile.premium && appData.currentUser.profile.premium.active;
                userInfoEl.innerHTML = `
                    <div class="avatar ${isPremium ? 'premium' : ''}" style="cursor:pointer" onclick="showProfile('${appData.currentUser.email}')">
                        ${initials(appData.currentUser.name)}
                    </div>
                    <div style="cursor:pointer" onclick="showProfile('${appData.currentUser.email}')">
                        ${escapeHtml(appData.currentUser.name)}
                        ${isPremium ? ' ‚≠ê' : ''}
                    </div>`;
                btnLogin.style.display = 'none';
                btnRegister.style.display = 'none';
                // –°–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫ "–°–æ–∑–¥–∞–≤–∞–π –≤–º–µ—Å—Ç–µ!" –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
                heroSection.style.display = 'none';
            } else {
                userInfoEl.innerHTML = '';
                btnLogin.style.display = 'inline';
                btnRegister.style.display = 'inline';
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ "–°–æ–∑–¥–∞–≤–∞–π –≤–º–µ—Å—Ç–µ!" –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
                heroSection.style.display = 'block';
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏
        function updatePremiumStatus() {
            if (!appData.currentUser) return;
            
            const isPremium = appData.currentUser.profile.premium && appData.currentUser.profile.premium.active;
            
            if (isPremium) {
                const expires = new Date(appData.currentUser.profile.premium.expires);
                const daysLeft = Math.ceil((expires - new Date()) / (1000 * 60 * 60 * 24));
                
                premiumStatus.innerHTML = `
                    <div class="premium-status active">
                        <div class="premium-status-icon">‚≠ê</div>
                        <div>
                            <div>–ü—Ä–µ–º–∏—É–º –∞–∫—Ç–∏–≤–µ–Ω</div>
                            <div class="small">–û—Å—Ç–∞–ª–æ—Å—å ${daysLeft} –¥–Ω–µ–π</div>
                        </div>
                    </div>
                `;
                premiumButton.textContent = '–ü—Ä–æ–¥–ª–∏—Ç—å –ø—Ä–µ–º–∏—É–º';
            } else {
                premiumStatus.innerHTML = `
                    <div class="premium-status">
                        <div>‚≠ê</div>
                        <div>–ü—Ä–µ–º–∏—É–º –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω</div>
                    </div>
                `;
                premiumButton.textContent = '–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–º–∏—É–º';
            }
        }

        function openPremiumModal() {
            if (!appData.currentUser) {
                alert('–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏');
                openAuth('login');
                return;
            }
            premiumModal.style.display = 'flex';
        }

        function hidePremiumModal() {
            premiumModal.style.display = 'none';
        }

        function purchasePremium() {
            const duration = parseInt(document.getElementById('premiumDuration').value);
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–µ–º–∏—É–º
            
            const user = appData.users.find(u => u.email === appData.currentUser.email);
            if (user) {
                const expires = new Date();
                expires.setMonth(expires.getMonth() + duration);
                
                user.profile.premium = {
                    active: true,
                    expires: expires.toISOString(),
                    purchased: new Date().toISOString(),
                    duration: duration
                };
                
                appData.currentUser.profile.premium = user.profile.premium;
                saveData();
                updateHeader();
                updatePremiumStatus();
                
                alert(`–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ ${duration} –º–µ—Å—è—Ü–µ–≤!`);
                hidePremiumModal();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–º–∏—É–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä–≤—ã–º–∏
                loadMarketplace();
                loadFeed();
            }
        }

        // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
        function loadFeed() {
            feedContainer.innerHTML = '';
            feedIndicators.innerHTML = '';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è: –ø—Ä–µ–º–∏—É–º —Å–Ω–∞—á–∞–ª–∞
            const sortedAds = [...filteredAds].sort((a, b) => {
                if (a.premium && !b.premium) return -1;
                if (!a.premium && b.premium) return 1;
                return 0;
            });
            
            if (sortedAds.length === 0) {
                feedContainer.innerHTML = `
                    <div class="feed-empty">
                        <div class="feed-empty-icon">üì∞</div>
                        <h3>–ü–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π</h3>
                        <p class="small">–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ!</p>
                        <button class="primary" onclick="openMarketplace()" style="margin-top:12px">–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>
                    </div>
                `;
                return;
            }
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–∫–∞–∑–∞
            updateCardsPerView();
            
            // –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
            const totalGroups = Math.ceil(sortedAds.length / cardsPerView);
            for (let i = 0; i < totalGroups; i++) {
                const indicator = document.createElement('div');
                indicator.className = `feed-indicator ${i === currentAdIndex ? 'active' : ''}`;
                indicator.addEventListener('click', () => {
                    goToSlide(i);
                });
                feedIndicators.appendChild(indicator);
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –≥—Ä—É–ø–ø—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π
            const startIndex = currentAdIndex * cardsPerView;
            const adsToShow = sortedAds.slice(startIndex, startIndex + cardsPerView);
            
            adsToShow.forEach((ad, index) => {
                const card = document.createElement('div');
                card.className = `feed-card active ${ad.premium ? 'premium' : ''}`;
                
                const typeIcons = {
                    'sell': 'üíé',
                    'buy': 'üõí', 
                    'project': 'üöÄ'
                };
                
                const categoryIcons = {
                    'artists': 'üé®',
                    'musicians': 'üéµ',
                    'writers': '‚úçÔ∏è',
                    'directors': 'üé¨'
                };
                
                const isMyItem = appData.currentUser && ad.authorEmail === appData.currentUser.email;
                
                card.innerHTML = `
                    <div class="feed-card-header">
                        <div class="feed-card-title">${typeIcons[ad.type]} ${escapeHtml(ad.title)}</div>
                        <div class="feed-card-price">${ad.price}‚ÇΩ</div>
                    </div>
                    <div class="feed-card-meta">
                        <div class="feed-card-category">
                            ${categoryIcons[ad.category]} ${getCategoryName(ad.category)}
                        </div>
                        <div class="feed-card-author">üë§ ${escapeHtml(ad.author)}</div>
                    </div>
                    ${!isMyItem && appData.currentUser ? `
                        <div class="feed-card-actions">
                            ${ad.type !== 'buy' ? `<button class="feed-card-buy" onclick="showPurchaseModal(${appData.marketplace.indexOf(ad)})">üõí –ö—É–ø–∏—Ç—å</button>` : `<button class="feed-card-buy" onclick="showResponseModal(${appData.marketplace.indexOf(ad)})">üì® –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>`}
                            <button class="feed-card-contact" onclick="startPrivateChat('${ad.author}')">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ –õ–°</button>
                        </div>
                    ` : ''}
                    ${isMyItem ? `
                        <div class="feed-card-actions">
                            <button class="ghost" onclick="deleteItem(${appData.marketplace.indexOf(ad)})" style="font-size:0.8rem;flex:1;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    ` : ''}
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
                card.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('feed-card-buy') && !e.target.classList.contains('feed-card-contact') && !e.target.classList.contains('ghost')) {
                        showAdDetail(ad);
                    }
                });
                
                feedContainer.appendChild(card);
            });
            
            updateNavButtons();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞
        function updateCardsPerView() {
            const width = window.innerWidth;
            if (width < 600) {
                cardsPerView = 1;
            } else if (width < 900) {
                cardsPerView = 2;
            } else {
                cardsPerView = 3;
            }
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Å–ª–∞–π–¥—É
        function goToSlide(slideIndex) {
            const totalGroups = Math.ceil(filteredAds.length / cardsPerView);
            if (slideIndex < 0) slideIndex = totalGroups - 1;
            if (slideIndex >= totalGroups) slideIndex = 0;
            
            currentAdIndex = slideIndex;
            loadFeed();
        }

        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ª–µ–Ω—Ç—ã
        function scrollFeed(direction) {
            const totalGroups = Math.ceil(filteredAds.length / cardsPerView);
            goToSlide(currentAdIndex + direction);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function updateNavButtons() {
            const totalGroups = Math.ceil(filteredAds.length / cardsPerView);
            feedPrev.disabled = totalGroups <= 1;
            feedNext.disabled = totalGroups <= 1;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
        function showAdDetail(ad) {
            currentAdForResponse = ad;
            
            const typeIcons = {
                'sell': 'üíé',
                'buy': 'üõí', 
                'project': 'üöÄ'
            };
            
            const categoryIcons = {
                'artists': 'üé®',
                'musicians': 'üéµ',
                'writers': '‚úçÔ∏è',
                'directors': 'üé¨'
            };
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
            const date = new Date(ad.createdAt);
            const formattedDate = `${date.getDate()} ${getMonthName(date.getMonth())} ${date.getFullYear()}, ${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;
            
            document.getElementById('detailTitle').textContent = `${typeIcons[ad.type]} ${escapeHtml(ad.title)}`;
            document.getElementById('detailPrice').textContent = `${ad.price}‚ÇΩ`;
            document.getElementById('detailCategory').textContent = `${categoryIcons[ad.category]} ${getCategoryName(ad.category)}`;
            document.getElementById('detailDate').textContent = formattedDate;
            document.getElementById('detailDescription').textContent = escapeHtml(ad.description);
            document.getElementById('detailAuthor').textContent = escapeHtml(ad.author);
            document.getElementById('detailType').textContent = getTypeName(ad.type);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∫–ª–∏–∫–∏
            loadAdResponses(ad.id);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –æ—Ç–∫–ª–∏–∫–∞
            const isMyAd = appData.currentUser && ad.authorEmail === appData.currentUser.email;
            responseForm.style.display = isMyAd ? 'none' : 'block';
            
            adDetailModal.style.display = 'flex';
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∫–ª–∏–∫–æ–≤ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
        function loadAdResponses(adId) {
            responsesList.innerHTML = '';
            
            if (!appData.responses[adId] || appData.responses[adId].length === 0) {
                responsesList.innerHTML = `
                    <div style="text-align:center;padding:20px;color:var(--muted)">
                        <div style="font-size:1.5rem;margin-bottom:10px;">üì®</div>
                        <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∫–ª–∏–∫–æ–≤ –Ω–∞ —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</p>
                    </div>
                `;
                return;
            }
            
            appData.responses[adId].forEach(response => {
                const responseItem = document.createElement('div');
                responseItem.className = 'response-item';
                
                const responseDate = new Date(response.timestamp);
                const formattedDate = `${responseDate.getDate()} ${getMonthName(responseDate.getMonth())} ${responseDate.getFullYear()}, ${responseDate.getHours()}:${responseDate.getMinutes().toString().padStart(2, '0')}`;
                
                responseItem.innerHTML = `
                    <div class="response-header">
                        <div class="response-author">${escapeHtml(response.author)}</div>
                        <div class="response-date">${formattedDate}</div>
                    </div>
                    <div class="response-message">${escapeHtml(response.message)}</div>
                `;
                
                responsesList.appendChild(responseItem);
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –æ—Ç–∫–ª–∏–∫–∞
        function showResponseForm() {
            responseMessage.focus();
        }

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫
        function submitResponse() {
            const message = responseMessage.value.trim();
            if (!message) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–∫–ª–∏–∫–∞');
                return;
            }
            
            if (!currentAdForResponse) {
                alert('–û—à–∏–±–∫–∞: –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
                return;
            }
            
            const response = {
                id: Date.now(),
                adId: currentAdForResponse.id,
                author: appData.currentUser.name,
                authorEmail: appData.currentUser.email,
                message: message,
                timestamp: new Date().toISOString()
            };
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –æ—Ç–∫–ª–∏–∫–æ–≤ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            if (!appData.responses[currentAdForResponse.id]) {
                appData.responses[currentAdForResponse.id] = [];
            }
            
            appData.responses[currentAdForResponse.id].push(response);
            saveData();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –æ—Ç–∫–ª–∏–∫–æ–≤
            loadAdResponses(currentAdForResponse.id);
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            responseMessage.value = '';
            
            alert('–í–∞—à –æ—Ç–∫–ª–∏–∫ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
        }

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫–ª–∏–∫–∞
        function showResponseModal(itemIndex) {
            const item = appData.marketplace[itemIndex];
            if (!item) return;
            
            currentAdForResponse = item;
            showAdDetail(item);
        }

        function startPrivateChatFromAd() {
            const adAuthor = document.getElementById('detailAuthor').textContent;
            startPrivateChat(adAuthor);
            adDetailModal.style.display = 'none';
        }

        function getMonthName(monthIndex) {
            const months = [
                '—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è',
                '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'
            ];
            return months[monthIndex];
        }

        // –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        function openMessages() {
            if (!appData.currentUser) {
                alert('–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º');
                openAuth('login');
                return;
            }
            showOnly(messagesCard);
            heroSection.classList.add('hidden');
            loadConversations();
        }

        function loadConversations() {
            conversationsList.innerHTML = '';
            
            if (!appData.privateMessages) {
                appData.privateMessages = {};
            }
            
            const userConversations = Object.keys(appData.privateMessages)
                .filter(conversationId => conversationId.includes(appData.currentUser.email));
            
            if (userConversations.length === 0) {
                conversationsList.innerHTML = `
                    <div class="feed-empty">
                        <div class="feed-empty-icon">üí¨</div>
                        <h3>–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
                        <p class="small">–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥</p>
                    </div>
                `;
                return;
            }
            
            userConversations.forEach(conversationId => {
                const participants = conversationId.split('_');
                const otherUserEmail = participants.find(email => email !== appData.currentUser.email);
                const otherUser = appData.users.find(u => u.email === otherUserEmail);
                
                if (!otherUser) return;
                
                const messages = appData.privateMessages[conversationId];
                const lastMessage = messages[messages.length - 1];
                
                const isPremium = otherUser.profile.premium && otherUser.profile.premium.active;
                
                const conversationItem = document.createElement('div');
                conversationItem.className = `conversation-item ${currentConversation === conversationId ? 'active' : ''}`;
                conversationItem.innerHTML = `
                    <div class="conversation-avatar ${isPremium ? 'premium' : ''}">${initials(otherUser.name)}</div>
                    <div class="conversation-info">
                        <div class="conversation-name">${escapeHtml(otherUser.name)}${isPremium ? ' ‚≠ê' : ''}</div>
                        <div class="conversation-preview">${escapeHtml(lastMessage.text)}</div>
                    </div>
                    <div class="conversation-time">${formatTime(lastMessage.timestamp)}</div>
                `;
                
                conversationItem.addEventListener('click', () => {
                    openConversation(conversationId, otherUser);
                });
                
                conversationsList.appendChild(conversationItem);
            });
        }

        function openConversation(conversationId, user) {
            currentConversation = conversationId;
            loadConversations(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥
            loadPrivateMessages(conversationId);
            document.getElementById('privateChatInput').placeholder = `–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è ${user.name}...`;
        }

        function loadPrivateMessages(conversationId) {
            privateChatMessages.innerHTML = '';
            const messages = appData.privateMessages[conversationId] || [];
            
            messages.forEach(msg => {
                const div = document.createElement('div');
                const isMe = msg.sender === appData.currentUser.email;
                const senderUser = appData.users.find(u => u.email === msg.sender);
                const isPremium = senderUser && senderUser.profile.premium && senderUser.profile.premium.active;
                
                div.className = 'msg' + (isMe ? ' me' : '');
                
                div.innerHTML = `
                    <div class="avatar ${isPremium ? 'premium' : ''}" style="width:40px;height:40px">${initials(isMe ? appData.currentUser.name : getUsernameByEmail(msg.sender))}</div>
                    <div class="bubble">
                        <div><strong>${escapeHtml(isMe ? '–í—ã' : getUsernameByEmail(msg.sender))}${isPremium ? ' ‚≠ê' : ''}</strong></div>
                        ${escapeHtml(msg.text)}
                    </div>`;
                privateChatMessages.appendChild(div);
            });
            
            privateChatMessages.scrollTop = privateChatMessages.scrollHeight;
        }

        function getUsernameByEmail(email) {
            const user = appData.users.find(u => u.email === email);
            return user ? user.name : email;
        }

        function handlePrivateSend() {
            const text = privateChatInput.value.trim();
            if (!text || !currentConversation) return;
            
            const msg = {
                sender: appData.currentUser.email,
                text: text,
                timestamp: new Date().toISOString()
            };
            
            if (!appData.privateMessages[currentConversation]) {
                appData.privateMessages[currentConversation] = [];
            }
            
            appData.privateMessages[currentConversation].push(msg);
            saveData();
            loadPrivateMessages(currentConversation);
            privateChatInput.value = '';
            loadConversations(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤
        }

        function startNewConversation() {
            const searchText = newConversationInput.value.trim();
            if (!searchText) return;
            
            // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email
            const foundUser = appData.users.find(u => 
                u.name.toLowerCase().includes(searchText.toLowerCase()) || 
                u.email.toLowerCase().includes(searchText.toLowerCase())
            );
            
            if (!foundUser) {
                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }
            
            if (foundUser.email === appData.currentUser.email) {
                alert('–ù–µ–ª—å–∑—è –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å —Å–∞–º–∏–º —Å–æ–±–æ–π');
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º ID –¥–∏–∞–ª–æ–≥–∞ (—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –ø–æ email)
            const participants = [appData.currentUser.email, foundUser.email].sort();
            const conversationId = participants.join('_');
            
            // –ï—Å–ª–∏ –¥–∏–∞–ª–æ–≥–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
            if (!appData.privateMessages[conversationId]) {
                appData.privateMessages[conversationId] = [
                    {
                        sender: appData.currentUser.email,
                        text: '–ü—Ä–∏–≤–µ—Ç! –ù–∞—á–∞–ª–æ –¥–∏–∞–ª–æ–≥–∞',
                        timestamp: new Date().toISOString()
                    }
                ];
                saveData();
            }
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥
            openConversation(conversationId, foundUser);
            newConversationInput.value = '';
        }

        function startPrivateChat(userName) {
            const foundUser = appData.users.find(u => u.name === userName);
            if (!foundUser) return;
            
            if (foundUser.email === appData.currentUser.email) {
                alert('–ù–µ–ª—å–∑—è –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å —Å–∞–º–∏–º —Å–æ–±–æ–π');
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º ID –¥–∏–∞–ª–æ–≥–∞ (—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –ø–æ email)
            const participants = [appData.currentUser.email, foundUser.email].sort();
            const conversationId = participants.join('_');
            
            // –ï—Å–ª–∏ –¥–∏–∞–ª–æ–≥–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
            if (!appData.privateMessages[conversationId]) {
                appData.privateMessages[conversationId] = [
                    {
                        sender: appData.currentUser.email,
                        text: '–ü—Ä–∏–≤–µ—Ç! –Ø —Ö–æ—á—É –æ–±—Å—É–¥–∏—Ç—å –≤–∞—à–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ',
                        timestamp: new Date().toISOString()
                    }
                ];
                saveData();
            }
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥
            openMessages();
            openConversation(conversationId, foundUser);
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 24 * 60 * 60 * 1000) {
                return date.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            } else {
                return date.toLocaleDateString('ru-RU');
            }
        }

        // –§–∏–ª—å—Ç—Ä—ã –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
        function openFilterModal() {
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
            modalCategoryFilter.value = categoryFilter.value;
            modalTypeFilter.value = document.getElementById('typeFilter') ? document.getElementById('typeFilter').value : 'all';
            
            filterModal.style.display = 'flex';
        }

        function applyFilters() {
            const searchTerm = searchFilter.value.toLowerCase();
            const category = categoryFilter.value;
            
            filteredAds = appData.marketplace.filter(ad => {
                // –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
                const matchesSearch = !searchTerm || 
                    ad.title.toLowerCase().includes(searchTerm) ||
                    ad.description.toLowerCase().includes(searchTerm) ||
                    ad.author.toLowerCase().includes(searchTerm);
                
                // –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const matchesCategory = category === 'all' || ad.category === category;
                
                return matchesSearch && matchesCategory;
            });
            
            currentAdIndex = 0;
            loadFeed();
            renderFilteredMarketplace(filteredAds);
        }

        function applyModalFilters() {
            const category = modalCategoryFilter.value;
            const type = modalTypeFilter.value;
            const minPrice = modalPriceMin.value ? parseInt(modalPriceMin.value) : 0;
            const maxPrice = modalPriceMax.value ? parseInt(modalPriceMax.value) : Infinity;
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
            categoryFilter.value = category;
            
            filteredAds = appData.marketplace.filter(ad => {
                // –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                const matchesCategory = category === 'all' || ad.category === category;
                
                // –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É
                const matchesType = type === 'all' || ad.type === type;
                
                // –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
                const matchesPrice = ad.price >= minPrice && ad.price <= maxPrice;
                
                return matchesCategory && matchesType && matchesPrice;
            });
            
            currentAdIndex = 0;
            loadFeed();
            renderFilteredMarketplace(filteredAds);
            filterModal.style.display = 'none';
        }

        function resetModalFilters() {
            modalCategoryFilter.value = 'all';
            modalTypeFilter.value = 'all';
            modalPriceMin.value = '';
            modalPriceMax.value = '';
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
            categoryFilter.value = 'all';
            searchFilter.value = '';
            
            filteredAds = [...appData.marketplace];
            currentAdIndex = 0;
            loadFeed();
            renderFilteredMarketplace(filteredAds);
            filterModal.style.display = 'none';
        }

        function clearFilters() {
            searchFilter.value = '';
            categoryFilter.value = 'all';
            
            filteredAds = [...appData.marketplace];
            currentAdIndex = 0;
            loadFeed();
            renderFilteredMarketplace(filteredAds);
        }

        function renderFilteredMarketplace(items) {
            marketplaceList.innerHTML = '';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ–±—ä—è–≤–ª–µ–Ω–∏—è: –ø—Ä–µ–º–∏—É–º —Å–Ω–∞—á–∞–ª–∞
            const sortedItems = [...items].sort((a, b) => {
                if (a.premium && !b.premium) return -1;
                if (!a.premium && b.premium) return 1;
                return 0;
            });
            
            if (sortedItems.length === 0) {
                marketplaceList.innerHTML = `
                    <div style="text-align:center;padding:40px 20px;color:var(--muted)">
                        <div style="font-size:2rem;margin-bottom:10px;">üîç</div>
                        <h4>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h4>
                        <p class="small">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
                    </div>
                `;
                return;
            }
            
            sortedItems.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = `marketplace-item ${item.premium ? 'premium' : ''}`;
                
                const typeIcons = {
                    'sell': 'üíé',
                    'buy': 'üõí', 
                    'project': 'üöÄ'
                };
                
                const categoryIcons = {
                    'artists': 'üé®',
                    'musicians': 'üéµ',
                    'writers': '‚úçÔ∏è',
                    'directors': 'üé¨'
                };
                
                const isMyItem = appData.currentUser && item.authorEmail === appData.currentUser.email;
                
                itemDiv.innerHTML = `
                    <div class="marketplace-header">
                        <div class="marketplace-title">${typeIcons[item.type]} ${escapeHtml(item.title)}</div>
                        <div class="marketplace-price">${item.price}‚ÇΩ</div>
                    </div>
                    <div class="marketplace-description">${escapeHtml(item.description)}</div>
                    <div class="marketplace-footer">
                        <div>${categoryIcons[item.category]} ${getCategoryName(item.category)} ‚Ä¢ ${escapeHtml(item.author)}</div>
                        <div class="marketplace-type">${getTypeName(item.type)}</div>
                    </div>
                    ${!isMyItem && appData.currentUser ? `
                        <div class="marketplace-actions">
                            ${item.type !== 'buy' ? `<button class="buy-button" onclick="showPurchaseModal(${appData.marketplace.indexOf(item)})">üõí –ö—É–ø–∏—Ç—å</button>` : `<button class="buy-button" onclick="showResponseModal(${appData.marketplace.indexOf(item)})">üì® –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>`}
                            <button class="contact-button" onclick="startPrivateChat('${item.author}')">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ –õ–°</button>
                        </div>
                    ` : ''}
                    ${isMyItem ? `
                        <div class="marketplace-actions">
                            <button class="ghost" onclick="deleteItem(${appData.marketplace.indexOf(item)})" style="font-size:0.8rem;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    ` : ''}
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
                itemDiv.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('buy-button') && !e.target.classList.contains('contact-button') && !e.target.classList.contains('ghost')) {
                        showAdDetail(item);
                    }
                });
                
                marketplaceList.appendChild(itemDiv);
            });
        }

        // –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
        function openMarketplace() {
            if (!appData.currentUser) {
                alert('–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—É');
                openAuth('login');
                return;
            }
            showOnly(marketplaceCard);
            heroSection.classList.add('hidden');
            loadMarketplace();
        }

        function showMarketplace() {
            showOnly(marketplaceCard);
            loadMarketplace();
        }

        function showSaleForm() {
            showOnly(saleFormCard);
        }

        function loadMarketplace() {
            // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
            applyFilters();
        }

        function getTypeName(type) {
            const names = {
                'sell': '–ü—Ä–æ–¥–∞–∂–∞',
                'buy': '–ü–æ–∏—Å–∫',
                'project': '–¢–µ–Ω–¥–µ—Ä'
            };
            return names[type] || type;
        }

        function getCategoryName(category) {
            const names = {
                'artists': '–•—É–¥–æ–∂–Ω–∏–∫–∏',
                'musicians': '–ú—É–∑—ã–∫–∞–Ω—Ç—ã',
                'writers': '–ü–∏—Å–∞—Ç–µ–ª–∏',
                'directors': '–†–µ–∂–∏—Å—Å—ë—Ä—ã'
            };
            return names[category] || category;
        }

        function createSale() {
            const title = document.getElementById('saleTitle').value.trim();
            const description = document.getElementById('saleDescription').value.trim();
            const price = document.getElementById('salePrice').value;
            const type = document.getElementById('saleType').value;
            const category = document.getElementById('saleCategory').value;
            
            if (!title || !description || !price) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
                return;
            }
            
            const isPremium = appData.currentUser.profile.premium && appData.currentUser.profile.premium.active;
            
            const saleItem = {
                id: Date.now(),
                title: title,
                description: description,
                price: parseInt(price),
                type: type,
                category: category,
                author: appData.currentUser.name,
                authorEmail: appData.currentUser.email,
                createdAt: new Date().toISOString(),
                premium: isPremium
            };
            
            appData.marketplace.unshift(saleItem);
            saveData();
            alert('–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ!' + (isPremium ? ' ‚≠ê (–ü—Ä–µ–º–∏—É–º)' : ''));
            showMarketplace();
            // –û–±–Ω–æ–≤–ª—è–µ–º –ª–µ–Ω—Ç—É
            filteredAds = [...appData.marketplace];
            loadFeed();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏
        function showPurchaseModal(itemIndex) {
            const item = appData.marketplace[itemIndex];
            if (!item) return;
            
            alert(`–í—ã –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ "${item.title}"`);
        }

        function deleteItem(itemIndex) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?')) {
                appData.marketplace.splice(itemIndex, 1);
                saveData();
                loadMarketplace();
                filteredAds = [...appData.marketplace];
                loadFeed(); // –û–±–Ω–æ–≤–ª—è–µ–º –ª–µ–Ω—Ç—É
                alert('–û–±—ä—è–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ');
            }
        }

        // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª—å
        function openAuth(mode) {
            showOnly(authContainer);
            heroSection.classList.add('hidden');
            
            if (mode === 'register') {
                authContainer.innerHTML = `
                    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
                    <form id="formRegister" class="auth-form">
                        <input id="r_name" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è" required>
                        <input id="r_email" type="email" placeholder="Email" required>
                        <input id="r_pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                        <input id="r_pass2" type="password" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                        <div class="form-navigation">
                            <button type="button" class="ghost" onclick="showHome()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        </div>
                    </form>`;
                
                document.getElementById('formRegister').addEventListener('submit', function(e) {
                    e.preventDefault();
                    const name = document.getElementById('r_name').value.trim();
                    const email = document.getElementById('r_email').value.trim().toLowerCase();
                    const password = document.getElementById('r_pass').value;
                    const password2 = document.getElementById('r_pass2').value;
                    
                    if (password.length < 6) return alert('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤');
                    if (password !== password2) return alert('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
                    if (appData.users.some(u => u.email === email)) return alert('Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    if (!validateEmail(email)) return alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email');
                    
                    const userProfile = {
                        role: 'other',
                        skills: [],
                        bio: '',
                        experience: 'beginner',
                        joinDate: new Date().toISOString(),
                        premium: {
                            active: false,
                            expires: null
                        }
                    };
                    
                    appData.users.push({
                        name: name,
                        email: email,
                        password: password,
                        profile: userProfile
                    });
                    
                    saveData();
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                    appData.currentUser = {
                        name: name,
                        email: email,
                        profile: userProfile
                    };
                    
                    saveData();
                    updateHeader();
                    updatePremiumStatus();
                    alert('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + name + '!');
                    showHome();
                });
            } else {
                authContainer.innerHTML = `
                    <h3>–í—Ö–æ–¥</h3>
                    <form id="formLogin" class="auth-form">
                        <input id="l_email" type="email" placeholder="Email" required>
                        <input id="l_pass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <div class="form-navigation">
                            <button type="button" class="ghost" onclick="showHome()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="primary">–í–æ–π—Ç–∏</button>
                        </div>
                    </form>`;
                
                document.getElementById('formLogin').addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = document.getElementById('l_email').value.trim().toLowerCase();
                    const password = document.getElementById('l_pass').value;
                    
                    const user = appData.users.find(u => u.email === email);
                    if (!user) return alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    
                    if (user.password !== password) return alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
                    
                    appData.currentUser = {
                        name: user.name,
                        email: user.email,
                        profile: user.profile
                    };
                    
                    saveData();
                    updateHeader();
                    updatePremiumStatus();
                    alert('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ' + user.name + '!');
                    showHome();
                });
            }
        }

        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        function showProfile(email) {
            const user = appData.users.find(u => u.email === email);
            if (!user) return;
            
            const roleInfo = roles.find(r => r.id === user.profile.role);
            const experienceLabels = {
                beginner: '–ù–∞—á–∏–Ω–∞—é—â–∏–π',
                intermediate: '–õ—é–±–∏—Ç–µ–ª—å', 
                advanced: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª'
            };
            
            const isPremium = user.profile.premium && user.profile.premium.active;
            const badgeClass = user.profile.role === 'buyer' ? 'buyer-badge' : isPremium ? 'premium-badge' : 'role-badge';
            
            document.getElementById('profileContent').innerHTML = `
                <div class="profile-header">
                    <div class="profile-avatar ${isPremium ? 'premium' : ''}">${initials(user.name)}</div>
                    <div>
                        <h3 style="margin:0">${escapeHtml(user.name)}</h3>
                        <div class="${badgeClass}">${roleInfo ? roleInfo.name : '–£—á–∞—Å—Ç–Ω–∏–∫'}${isPremium ? ' ‚≠ê' : ''}</div>
                        <div class="small">${experienceLabels[user.profile.experience]}</div>
                    </div>
                </div>
                
                ${user.profile.bio ? `<p>${escapeHtml(user.profile.bio)}</p>` : ''}
                
                <div>
                    <strong>${user.profile.role === 'buyer' ? '–ò–Ω—Ç–µ—Ä–µ—Å—ã:' : '–ù–∞–≤—ã–∫–∏:'}</strong>
                    <div class="profile-skills">
                        ${user.profile.skills.map(skill => `<div class="profile-skill">${skill}</div>`).join('')}
                        ${user.profile.skills.length === 0 ? '<div class="small">–ù–µ —É–∫–∞–∑–∞–Ω—ã</div>' : ''}
                    </div>
                </div>
                
                ${isPremium ? `
                    <div style="margin-top:15px">
                        <div class="premium-status active">
                            <div class="premium-status-icon">‚≠ê</div>
                            <div>
                                <div>–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞</div>
                                <div class="small">–ò—Å—Ç–µ–∫–∞–µ—Ç ${new Date(user.profile.premium.expires).toLocaleDateString('ru-RU')}</div>
                            </div>
                        </div>
                    </div>
                ` : ''}
                
                <div style="margin-top:15px" class="small">
                    –£—á–∞—Å—Ç–Ω–∏–∫ —Å ${new Date(user.profile.joinDate).toLocaleDateString('ru-RU')}
                </div>
                
                <div style="display:flex;flex-direction:column;gap:10px;margin-top:20px">
                    <button class="primary" onclick="hideProfile()">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button class="ghost" onclick="logoutFromProfile()">üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
                    ${appData.currentUser && appData.currentUser.email === email ? 
                        `<button class="ghost" onclick="editProfile()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>` : ''}
                    ${appData.currentUser && appData.currentUser.email === email && !isPremium ? 
                        `<button class="premium" onclick="openPremiumModal()">‚≠ê –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–º–∏—É–º</button>` : ''}
                </div>
            `;
            
            document.getElementById('profileModal').style.display = 'flex';
        }

        function logoutFromProfile() {
            hideProfile();
            logout();
        }

        function hideProfile() {
            document.getElementById('profileModal').style.display = 'none';
        }

        function editProfile() {
            // –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
            const newBio = prompt('–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ:');
            if (newBio !== null) {
                const user = appData.users.find(u => u.email === appData.currentUser.email);
                if (user) {
                    user.profile.bio = newBio;
                    appData.currentUser.profile.bio = newBio;
                    saveData();
                    alert('–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω!');
                    hideProfile();
                }
            }
        }

        function openSection(section) {
            if (!appData.currentUser) {
                alert('–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —á–∞—Ç–∞–º');
                openAuth('login');
                return;
            }
            showOnly(chatCard);
            heroSection.classList.add('hidden');
            currentChat = 'chat-' + section;
            
            const titles = {
                artists: '–•—É–¥–æ–∂–Ω–∏–∫–∏', 
                musicians: '–ú—É–∑—ã–∫–∞–Ω—Ç—ã', 
                writers: '–ü–∏—Å–∞—Ç–µ–ª–∏', 
                directors: '–†–µ–∂–∏—Å—Å—ë—Ä—ã',
                general: '–û–±—â–∏–π'
            };
            
            document.getElementById('chatTitle').textContent = '–ß–∞—Ç: ' + (titles[section] || '–û–±—â–∏–π');
            loadChat();
        }

        function loadChat() {
            chatMessages.innerHTML = '';
            const list = appData.chats[currentChat] || [];
            list.forEach(m => renderMsg(m));
        }

        function renderMsg(m) {
            const div = document.createElement('div');
            const isMe = appData.currentUser && m.user === appData.currentUser.name;
            const senderUser = appData.users.find(u => u.name === m.user);
            const isPremium = senderUser && senderUser.profile.premium && senderUser.profile.premium.active;
            
            div.className = 'msg' + (isMe ? ' me' : '');
            
            div.innerHTML = `
                <div class="avatar ${isPremium ? 'premium' : ''}" style="width:40px;height:40px">${initials(m.user)}</div>
                <div class="bubble">
                    <div><strong>${escapeHtml(m.user)}${isPremium ? ' ‚≠ê' : ''}</strong></div>
                    ${escapeHtml(m.text)}
                </div>`;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function handleSend() {
            const text = chatInput.value.trim();
            if (!text) return;
            if (!appData.currentUser) return alert('–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –ø–∏—Å–∞—Ç—å!');
            
            const msg = {
                user: appData.currentUser.name,
                text: text,
                timestamp: new Date().toISOString()
            };
            
            appData.chats[currentChat] = appData.chats[currentChat] || [];
            appData.chats[currentChat].push(msg);
            saveData();
            renderMsg(msg);
            chatInput.value = '';
        }

        function showOnly(el) {
            homePage.classList.add('hidden');
            chatCard.classList.add('hidden');
            messagesCard.classList.add('hidden');
            marketplaceCard.classList.add('hidden');
            saleFormCard.classList.add('hidden');
            authContainer.classList.add('hidden');
            el.classList.remove('hidden');
        }

        function showHome() {
            homePage.classList.remove('hidden');
            chatCard.classList.add('hidden');
            messagesCard.classList.add('hidden');
            marketplaceCard.classList.add('hidden');
            saleFormCard.classList.add('hidden');
            authContainer.classList.add('hidden');
            heroSection.classList.remove('hidden');
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–µ–Ω—Ç—É –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            loadFeed();
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∏
            updatePremiumStatus();
        }

        function logout() {
            appData.currentUser = null;
            saveData();
            updateHeader();
            showHome();
        }

        function showAbout() {
            document.getElementById('aboutModal').style.display = 'flex';
        }

        function hideAbout() {
            document.getElementById('aboutModal').style.display = 'none';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
            try {
                const savedData = localStorage.getItem('aidtogether_data');
                if (savedData) {
                    const parsed = JSON.parse(savedData);
                    appData = {...appData, ...parsed};
                }
            } catch (e) {
                console.log('LocalStorage –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏');
            }
            
            updateHeader();
            showHome();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            closeFilterModal.addEventListener('click', function() {
                filterModal.style.display = 'none';
            });
            
            modalApplyFilters.addEventListener('click', applyModalFilters);
            modalResetFilters.addEventListener('click', resetModalFilters);
            
            closeAdDetailModal.addEventListener('click', function() {
                adDetailModal.style.display = 'none';
            });
            
            closePremiumModal.addEventListener('click', function() {
                premiumModal.style.display = 'none';
            });
            
            // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', function() {
                loadFeed();
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
            window.addEventListener('click', function(e) {
                if (e.target === filterModal) {
                    filterModal.style.display = 'none';
                }
                if (e.target === adDetailModal) {
                    adDetailModal.style.display = 'none';
                }
                if (e.target === premiumModal) {
                    premiumModal.style.display = 'none';
                }
                if (e.target === document.getElementById('aboutModal')) {
                    hideAbout();
                }
                if (e.target === document.getElementById('profileModal')) {
                    hideProfile();
                }
            });
        });
    </script>
</body>
</html>